# 업로드 모달 버튼 렌더링 수정사항

## 문제점
- 업로드 모달에서 파일 선택 시 좌우 화살표 버튼과 삭제 버튼이 화면에 렌더링되지 않는 문제

## 원인 분석
1. **querySelector 범위 문제**: 모달이 템플릿 시스템으로 동적 생성되는데, `querySelector`가 전역에서 검색하여 요소를 찾지 못함
2. **타이밍 문제**: DOM 업데이트가 완료되기 전에 스타일 변경이 시도됨
3. **강제 리플로우 부재**: 브라우저가 변경사항을 즉시 반영하지 않음

## 수정 내용

### 1. `resetUploadFilePreview()` 함수 수정
```javascript
// 변경 전: 전역에서 querySelector 사용
const removeBtn = document.querySelector('.upload-remove-btn');

// 변경 후: 모달 내부에서 querySelector 사용
const modal = document.getElementById('upload-modal');
if (!modal) return;
const removeBtn = modal.querySelector('.upload-remove-btn');
```

### 2. `updateUploadFilePreview()` 함수 수정
- 모달 내부에서 요소 검색하도록 변경
- 디버깅을 위한 console.log 추가
- 버튼 표시 시 강제 리플로우 추가:
```javascript
// 강제 리플로우 (브라우저가 변경사항을 즉시 반영하도록)
if (removeBtn) removeBtn.offsetHeight;
if (prevBtn) prevBtn.offsetHeight;
if (nextBtn) nextBtn.offsetHeight;
```

### 3. `handleUploadImageChange()` 함수 수정
- setTimeout을 사용하여 DOM 업데이트 후 화면 갱신:
```javascript
setTimeout(() => {
    updateUploadFilePreview();
}, 0);
```

### 4. `removeCurrentUploadImage()` 함수 수정
- 파일 제거 후 setTimeout으로 화면 강제 업데이트

### 5. `prevUploadImage()`, `nextUploadImage()`, `goToUploadImage()` 함수 수정
- 모든 네비게이션 함수에 setTimeout 추가
- 디버깅 로그 추가

## 테스트 방법

1. **브라우저 개발자 도구 열기** (F12)
2. **Console 탭 확인** - 디버깅 로그가 출력됨
3. **업로드 모달 열기**
4. **파일 2개 이상 선택**
5. **확인 사항**:
   - ✅ 좌우 화살표 버튼이 표시되는지
   - ✅ 삭제 버튼이 표시되는지
   - ✅ 화살표 클릭 시 이미지가 전환되는지
   - ✅ 삭제 버튼 클릭 시 파일이 제거되는지
   - ✅ Console에 로그가 정상 출력되는지

## 예상 Console 로그

```
파일 선택됨: 2 개
파일 배열 업데이트됨: 2 개
updateUploadFilePreview 호출됨: {filesCount: 2, currentIndex: 0, removeBtn: true, prevBtn: true, nextBtn: true}
제거 버튼 표시됨
이전 버튼 표시됨
다음 버튼 표시됨
```

## 추가 확인 사항

만약 여전히 버튼이 표시되지 않는다면:

1. **CSS 파일 로드 확인**:
   - `css/upload.css`가 제대로 로드되었는지 확인
   - Network 탭에서 CSS 파일 상태 확인

2. **모달 템플릿 확인**:
   - `js/templates/modals/upload.js`의 HTML 구조 확인
   - 버튼 클래스명이 일치하는지 확인

3. **z-index 문제**:
   - 다른 요소가 버튼을 가리고 있는지 확인
   - Elements 탭에서 버튼 요소의 computed style 확인

## 수정된 파일
- `js/upload.js` (5개 함수 수정)
