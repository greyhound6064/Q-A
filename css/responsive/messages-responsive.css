/**
 * @file messages-responsive.css
 * @description 쪽지 시스템 반응형 스타일
 */

/* ========== 태블릿 가로 모드 (768px ~ 1024px) ========== */
@media (min-width: 769px) and (max-width: 1024px) {
    /* 메시지 컨테이너 */
    .messages-container {
        width: 90% !important;
        max-width: 900px !important;
        height: 80% !important;
        margin-left: 0 !important;
    }
    
    /* 사이드바 */
    .messages-sidebar {
        width: 350px !important;
        min-width: 350px !important;
        max-width: 350px !important;
    }
    
    /* 대화 목록 */
    .messages-conversations-list {
        flex: 1;
        overflow-y: auto;
        min-height: 0;
    }
    
    /* 대화 아이템 */
    .conversation-item {
        padding: 10px 14px;
        min-height: 68px;
    }
    
    .conversation-avatar {
        width: 38px;
        height: 38px;
        flex-shrink: 0;
    }
    
    .conversation-info {
        flex: 1;
        min-width: 0;
        padding-right: 36px;
    }
    
    .conversation-name {
        font-size: 13px;
    }
    
    .conversation-time {
        font-size: 11px;
    }
    
    .conversation-preview {
        font-size: 12px;
    }
    
    /* 채팅 헤더 */
    .messages-chat-header {
        padding: 10px 16px;
    }
    
    .messages-chat-avatar {
        width: 32px;
        height: 32px;
    }
    
    .messages-chat-username {
        font-size: 13px;
    }
    
    /* 메시지 버블 */
    .message-bubble-content {
        max-width: 70%;
    }
    
    .message-bubble-text {
        font-size: 13px;
        padding: 9px 13px;
    }
    
    /* 입력 영역 */
    .messages-chat-input {
        font-size: 13px;
    }
    
    .messages-chat-send-btn {
        width: 38px;
        height: 38px;
    }
}

/* ========== 모바일 (480px 미만) ========== */
@media (max-width: 480px) {
    /* 메시지 컨테이너 */
    .messages-container {
        width: 100% !important;
        max-width: 100% !important;
        height: calc(100vh - 48px - 65px) !important; /* 상단 헤더(48px) + 하단 네비게이션(65px) 제외 */
        margin: 0 !important;
        margin-top: 48px !important; /* 상단 헤더 공간 확보 */
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        transform: none !important;
        border-radius: 0;
    }
    
    /* 메시지 탭 활성화 시 content-area */
    .content-area:has(#messages-tab-content.active) {
        padding: 0 !important;
        margin-top: 48px;
        height: calc(100vh - 113px) !important; /* 상단 헤더(48px) + 하단 네비(65px) */
        overflow: hidden;
    }
    
    /* 메시지 탭 컨텐츠 */
    #messages-tab-content {
        height: 100% !important;
    }
    
    /* 사이드바 - 모바일에서는 토글 방식 */
    .messages-sidebar {
        width: 100% !important;
        min-width: 100% !important;
        max-width: 100% !important;
        border-right: none;
        border-bottom: 1px solid var(--border);
        height: 100%;
        max-height: 100%;
        overflow-y: auto;
        transition: transform 0.3s ease;
    }
    
    /* 대화 영역이 활성화되면 사이드바 숨김 */
    .messages-sidebar.mobile-hidden {
        display: none !important;
    }
    
    /* 사이드바 헤더 */
    .messages-sidebar-header {
        padding: 12px 16px;
        position: sticky;
        top: 0;
        z-index: 10;
        background: var(--card-bg);
    }
    
    .messages-sidebar-header h2 {
        font-size: 16px;
    }
    
    /* 대화 목록 */
    .messages-conversations-list {
        flex: 1;
        overflow-y: auto;
        min-height: 0;
    }
    
    /* 대화 아이템 */
    .conversation-item {
        padding: 12px 16px;
        min-height: 70px;
    }
    
    .conversation-avatar {
        width: 40px;
        height: 40px;
        flex-shrink: 0;
    }
    
    .conversation-info {
        flex: 1;
        min-width: 0;
        padding-right: 40px;
    }
    
    .conversation-name {
        font-size: 14px;
    }
    
    .conversation-time {
        font-size: 11px;
    }
    
    .conversation-preview {
        font-size: 12px;
    }
    
    /* 삭제 버튼 - 모바일에서는 항상 표시 */
    .conversation-delete-btn {
        display: flex !important;
        opacity: 0.6;
        right: 12px;
    }
    
    .conversation-item:hover .conversation-delete-btn {
        opacity: 1;
    }
    
    /* 채팅 영역 - 모바일에서는 기본적으로 숨김 */
    .messages-chat-area {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--card-bg);
        z-index: 10;
        display: none; /* 기본적으로 숨김 */
    }
    
    /* 대화가 선택되면 표시 */
    .messages-chat-area.active {
        display: flex !important;
        flex-direction: column;
    }
    
    /* 빈 상태는 모바일에서 항상 숨김 */
    .messages-chat-empty {
        display: none !important;
    }
    
    /* 채팅 컨텐츠 영역 */
    .messages-chat-content {
        display: flex !important;
        flex-direction: column;
        height: 100%;
        min-height: 0;
    }
    
    /* 채팅 헤더 - 뒤로가기 버튼 추가 */
    .messages-chat-header {
        padding: 10px 16px;
        background: var(--card-bg);
        border-bottom: 1px solid var(--border);
        display: flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 0;
        z-index: 10;
    }
    
    /* 모바일 뒤로가기 버튼 */
    .messages-chat-header::before {
        content: '←';
        font-size: 24px;
        font-weight: bold;
        color: var(--text);
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 8px;
        transition: background 0.2s;
        flex-shrink: 0;
    }
    
    .messages-chat-header::before:active {
        background: var(--border);
    }
    
    .messages-chat-user-info {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
    }
    
    .messages-chat-avatar {
        width: 32px;
        height: 32px;
    }
    
    .messages-chat-username {
        font-size: 14px;
    }
    
    /* 메시지 목록 */
    .messages-chat-messages {
        flex: 1;
        padding: 12px 16px;
        overflow-y: auto;
        min-height: 0;
    }
    
    /* 메시지 버블 */
    .message-bubble-content {
        max-width: 85%;
    }
    
    .message-bubble-text {
        padding: 8px 12px;
        font-size: 14px;
        border-radius: 14px;
    }
    
    .message-bubble-time {
        font-size: 10px;
    }
    
    /* 입력 영역 */
    .messages-chat-input-area {
        padding: 10px 16px;
        background: var(--card-bg);
        flex-shrink: 0;
        border-top: 1px solid var(--border);
    }
    
    .messages-chat-input {
        font-size: 14px;
        padding: 10px 14px;
        max-height: 80px;
    }
    
    .messages-chat-send-btn {
        width: 40px;
        height: 40px;
    }
    
    .messages-chat-send-btn svg {
        width: 20px;
        height: 20px;
    }
    
    /* 빈 상태 */
    .messages-chat-empty {
        padding: 20px;
    }
    
    .messages-chat-empty svg {
        width: 48px;
        height: 48px;
    }
    
    .messages-chat-empty p {
        font-size: 14px;
    }
    
    /* 로딩 스피너 */
    .messages-loading {
        padding: 40px 20px;
    }
    
    .messages-loading-spinner {
        width: 32px;
        height: 32px;
    }
    
    /* 다크모드 */
    body.dark-mode .messages-sidebar-header {
        background: var(--card-bg);
    }
    
    body.dark-mode .messages-chat-input-area {
        background: var(--card-bg);
    }
}

/* ========== 작은 모바일 (480px 미만) ========== */
@media (max-width: 480px) {
    /* 메시지 탭 - 전체 화면 사용 */
    .messages-sidebar {
        height: 100%;
        max-height: 100%;
    }
    
    .messages-sidebar.mobile-hidden {
        display: none !important;
    }
    
    .messages-conversations-list {
        flex: 1;
        overflow-y: auto;
        min-height: 0;
    }
    
    .messages-chat-area {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
        display: none;
    }
    
    .messages-chat-area.active {
        display: flex !important;
        flex-direction: column;
    }
    
    .messages-chat-empty {
        display: none !important;
    }
    
    .messages-chat-content {
        display: flex !important;
        flex-direction: column;
        height: 100%;
        min-height: 0;
    }
    
    .messages-chat-messages {
        flex: 1;
        padding: 10px 12px;
        overflow-y: auto;
        min-height: 0;
    }
    
    .messages-chat-input-area {
        flex-shrink: 0;
        border-top: 1px solid var(--border);
    }
    
    .conversation-item {
        padding: 10px 12px;
        min-height: 65px;
    }
    
    .conversation-avatar {
        width: 36px;
        height: 36px;
        flex-shrink: 0;
    }
    
    .conversation-info {
        flex: 1;
        min-width: 0;
        padding-right: 36px;
    }
    
    .conversation-name {
        font-size: 13px;
    }
    
    .conversation-time {
        font-size: 10px;
    }
    
    .conversation-preview {
        font-size: 11px;
    }
    
    .conversation-delete-btn {
        right: 10px;
    }
    
    .messages-chat-header {
        padding: 8px 12px;
        display: flex;
        align-items: center;
        gap: 8px;
        flex-shrink: 0;
        background: var(--card-bg);
        border-bottom: 1px solid var(--border);
    }
    
    /* 뒤로가기 버튼 */
    .messages-chat-header::before {
        content: '←';
        font-size: 22px;
        font-weight: bold;
        color: var(--text);
        cursor: pointer;
        padding: 4px 6px;
        border-radius: 6px;
        transition: background 0.2s;
        flex-shrink: 0;
    }
    
    .messages-chat-header::before:active {
        background: var(--border);
    }
    
    .messages-chat-avatar {
        width: 28px;
        height: 28px;
    }
    
    .messages-chat-username {
        font-size: 13px;
    }
    
    .message-bubble-content {
        max-width: 90%;
    }
    
    .message-bubble-text {
        padding: 7px 10px;
        font-size: 13px;
    }
    
    .messages-chat-input-area {
        padding: 8px 12px;
    }
    
    .messages-chat-input {
        font-size: 13px;
        padding: 8px 12px;
    }
    
    .messages-chat-send-btn {
        width: 36px;
        height: 36px;
    }
    
    .messages-chat-send-btn svg {
        width: 18px;
        height: 18px;
    }
}

/* ========== 모바일 가로 모드 (최대 높이 500px) ========== */
@media (max-height: 500px) and (orientation: landscape) {
    /* 메시지 컨테이너 */
    .messages-container {
        height: calc(100vh - 48px - 65px) !important; /* 상단 헤더(48px) + 하단 네비게이션(65px) 제외 */
        margin-top: 48px !important;
    }
    
    /* 사이드바 - 전체 화면 */
    .messages-sidebar {
        height: 100%;
        max-height: 100%;
    }
    
    .messages-sidebar.mobile-hidden {
        display: none !important;
    }
    
    .messages-conversations-list {
        flex: 1;
        overflow-y: auto;
        min-height: 0;
    }
    
    .messages-sidebar-header {
        padding: 8px 12px;
    }
    
    .messages-sidebar-header h2 {
        font-size: 14px;
    }
    
    /* 대화 아이템 축소 */
    .conversation-item {
        padding: 8px 12px;
        min-height: 60px;
    }
    
    .conversation-avatar {
        width: 32px;
        height: 32px;
        flex-shrink: 0;
    }
    
    .conversation-info {
        flex: 1;
        min-width: 0;
        padding-right: 36px;
    }
    
    .conversation-name {
        font-size: 12px;
    }
    
    .conversation-time {
        font-size: 10px;
    }
    
    .conversation-preview {
        font-size: 11px;
    }
    
    .conversation-delete-btn {
        right: 10px;
    }
    
    /* 채팅 영역 - 전체 화면 */
    .messages-chat-area {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
        display: none;
    }
    
    .messages-chat-area.active {
        display: flex !important;
        flex-direction: column;
    }
    
    .messages-chat-empty {
        display: none !important;
    }
    
    .messages-chat-content {
        display: flex !important;
        flex-direction: column;
        height: 100%;
        min-height: 0;
    }
    
    .messages-chat-header {
        padding: 6px 12px;
        display: flex;
        align-items: center;
        gap: 6px;
        flex-shrink: 0;
    }
    
    /* 뒤로가기 버튼 */
    .messages-chat-header::before {
        content: '←';
        font-size: 20px;
        font-weight: bold;
        color: var(--text);
        cursor: pointer;
        padding: 2px 4px;
        border-radius: 6px;
        transition: background 0.2s;
        flex-shrink: 0;
    }
    
    .messages-chat-header::before:active {
        background: var(--border);
    }
    
    .messages-chat-avatar {
        width: 24px;
        height: 24px;
    }
    
    .messages-chat-username {
        font-size: 12px;
    }
    
    /* 메시지 목록 */
    .messages-chat-messages {
        flex: 1;
        padding: 8px 12px;
        overflow-y: auto;
        min-height: 0;
    }
    
    .messages-chat-input-area {
        flex-shrink: 0;
        border-top: 1px solid var(--border);
    }
    
    .message-bubble-text {
        padding: 6px 10px;
        font-size: 12px;
    }
    
    .message-bubble-time {
        font-size: 9px;
    }
    
    /* 입력 영역 */
    .messages-chat-input-area {
        padding: 6px 12px;
    }
    
    .messages-chat-input {
        font-size: 12px;
        padding: 6px 10px;
        min-height: 30px;
        max-height: 60px;
    }
    
    .messages-chat-send-btn {
        width: 32px;
        height: 32px;
    }
    
    .messages-chat-send-btn svg {
        width: 16px;
        height: 16px;
    }
}
