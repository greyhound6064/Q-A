<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïã¨Ìîå Ïª§ÎÆ§ÎãàÌã∞</title>
    
    <!-- CSS Î™®Îìà (ÏàúÏÑú Ï§ëÏöî!) -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/artwork.css">
    <link rel="stylesheet" href="css/upload.css">
    <link rel="stylesheet" href="css/feed.css">
    <link rel="stylesheet" href="css/gallery.css">
    <link rel="stylesheet" href="css/messages.css">
    <link rel="stylesheet" href="css/user-search.css">
    <link rel="stylesheet" href="css/nickname-validation.css">
    <link rel="stylesheet" href="css/components/welcome.css">
    
    <!-- Í∏∞Ï°¥ ÌÜµÌï© CSS (Î∞±ÏóÖÏö© - ÎÇòÏ§ëÏóê ÏÇ≠Ï†ú Í∞ÄÎä•) -->
    <!-- <link rel="stylesheet" href="style.css"> -->
    
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="dark-mode">
    <div class="main-layout">
        <div class="sidebar" id="sidebar">
            <!-- Î°úÍ≥† -->
            <div class="sidebar-logo">
                <img src="Î°úÍ≥†2_ÏûëÏùÄÎ≤ÑÏ†Ñ2.png" alt="VIBING Logo" id="sidebar-logo-img" style="cursor: pointer;" title="ÌôîÎ©¥ Î™®Îìú">
                <span class="sidebar-logo-tooltip">ÌôîÎ©¥ Î™®Îìú</span>
            </div>
            
            <!-- Î∞∞Í≤ΩÏùåÏïÖ Ïª®Ìä∏Î°§ -->
            <div class="music-control">
                <button class="music-toggle-btn" id="music-toggle-btn" title="Î∞∞Í≤ΩÏùåÏïÖ Ïû¨ÏÉù/ÏùºÏãúÏ†ïÏßÄ">
                    <!-- Ìó§ÎìúÏÖã Ïù¥Î™®ÏßÄ Ïä§ÌÉÄÏùº ÏïÑÏù¥ÏΩò (Ïû¨ÏÉù Ï§ë) -->
                    <svg class="music-icon music-play" width="28" height="28" viewBox="0 0 64 64" fill="currentColor" style="display:none;">
                        <path d="M32 8C24 8 18 14 18 22v8c0 2.2-1.8 4-4 4s-4-1.8-4-4v-8c0-12 10-22 22-22s22 10 22 22v8c0 2.2-1.8 4-4 4s-4-1.8-4-4v-8c0-8-6-14-14-14z"/>
                        <circle cx="14" cy="30" r="6"/>
                        <circle cx="50" cy="30" r="6"/>
                        <path d="M28 48h8v8h-8z" opacity="0.7"/>
                        <!-- ÏÇ¨Ïö¥Îìú Ïõ®Ïù¥Î∏å Ïï†ÎãàÎ©îÏù¥ÏÖò -->
                        <g class="sound-waves">
                            <path d="M56 24c2 0 2 4 0 4" stroke="currentColor" stroke-width="2" fill="none" opacity="0.6"/>
                            <path d="M58 20c3 0 3 8 0 8" stroke="currentColor" stroke-width="2" fill="none" opacity="0.4"/>
                        </g>
                    </svg>
                    <!-- Ìó§ÎìúÏÖã Ïù¥Î™®ÏßÄ Ïä§ÌÉÄÏùº ÏïÑÏù¥ÏΩò (ÏùºÏãúÏ†ïÏßÄ) -->
                    <svg class="music-icon music-pause" width="28" height="28" viewBox="0 0 64 64" fill="currentColor">
                        <path d="M32 8C24 8 18 14 18 22v8c0 2.2-1.8 4-4 4s-4-1.8-4-4v-8c0-12 10-22 22-22s22 10 22 22v8c0 2.2-1.8 4-4 4s-4-1.8-4-4v-8c0-8-6-14-14-14z" opacity="0.4"/>
                        <circle cx="14" cy="30" r="6" opacity="0.4"/>
                        <circle cx="50" cy="30" r="6" opacity="0.4"/>
                        <path d="M28 48h8v8h-8z" opacity="0.3"/>
                        <!-- ÏÇ¨ÏÑ† (ÏùåÏÜåÍ±∞ ÌëúÏãú) -->
                        <line x1="10" y1="54" x2="54" y2="10" stroke="currentColor" stroke-width="4" stroke-linecap="round" opacity="0.8"/>
                    </svg>
                </button>
                
                <!-- ÏùåÎüâ Ï°∞Ï†à Ïä¨ÎùºÏù¥Îçî (Ìò∏Î≤Ñ Ïãú ÌëúÏãú) -->
                <div class="music-volume-control" id="music-volume-control">
                    <input type="range" 
                           class="music-volume-slider" 
                           id="music-volume-slider" 
                           min="0" 
                           max="100" 
                           value="30"
                           title="ÏùåÎüâ Ï°∞Ï†à">
                    <div class="volume-percentage" id="volume-percentage">30%</div>
                </div>
            </div>
            
            <nav class="tabs">
                <button class="tab-button" data-tab="profile">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <span>ÌîÑÎ°úÌïÑ</span>
                </button>
                <button class="tab-button active" data-tab="gallery">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>ÏûëÌíàÍ¥Ä</span>
                </button>
                <button class="tab-button" data-tab="feed">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>ÏûêÏú†Í≤åÏãúÌåê</span>
                </button>
                <button class="tab-button" data-tab="messages">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                    <span>Î©îÏãúÏßÄ</span>
                </button>
                <button class="tab-button" data-tab="user-search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                        <path d="M11 8a3 3 0 0 0-6 0"></path>
                    </svg>
                    <span>ÏÇ¨Ïö©Ïûê Í≤ÄÏÉâ</span>
                </button>
            </nav>
        </div>

        <div class="content-area">
            <!-- Î°úÍ∑∏Ïù∏ Î≤ÑÌäº (Ïò§Î•∏Ï™Ω ÏÉÅÎã®) -->
            <div id="auth-section-header">
                <button type="button" id="btn-login">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                    </svg>
                    <span>Íµ¨Í∏Ä Î°úÍ∑∏Ïù∏</span>
                </button>
                <div id="user-info" style="display:none;">
                    <!-- <span id="user-email"></span> -->
                </div>
            </div>
            
            <div id="profile-tab-content" class="tab-content" style="display:none;">
                <div class="profile-container">
                    <!-- ÌîÑÎ°úÌïÑ Ìó§Îçî -->
                    <div class="profile-header">
                        <div class="profile-avatar-container">
                            <div class="profile-avatar" id="profile-avatar">
                                <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                            </div>
                        </div>
                        <div class="profile-info">
                            <div class="profile-username-row">
                                <h2 class="profile-username" id="profile-username">ÏÇ¨Ïö©ÏûêÎ™Ö</h2>
                                <button class="profile-edit-btn" id="profile-edit-btn" onclick="openProfileEditModal()">ÌîÑÎ°úÌïÑ Ìé∏Ïßë</button>
                                <button class="profile-follow-btn" id="profile-follow-btn" style="display:none;" onclick="handleProfileFollowToggle()">ÌåîÎ°úÏö∞</button>
                                <button class="profile-message-btn" id="profile-message-btn" style="display:none;" onclick="handleSendMessageFromProfile()" title="Ï™ΩÏßÄ Î≥¥ÎÇ¥Í∏∞">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </button>
                                <button class="profile-upload-btn" id="profile-upload-btn" onclick="openUploadModal()" title="Í≤åÏãúÎ¨º ÏóÖÎ°úÎìú">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="12" y1="8" x2="12" y2="16"></line>
                                        <line x1="8" y1="12" x2="16" y2="12"></line>
                                    </svg>
                                </button>
                            </div>
                            <div class="profile-bio" id="profile-bio">ÏÜåÍ∞úÍ∏ÄÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§.</div>
                            
                            <!-- ÏÉÅÌÉú ÌëúÏãú -->
                            <div class="profile-status-container" id="profile-status-container">
                                <div class="profile-status-list" id="profile-status-list">
                                    <!-- ÏÉÅÌÉú Î∞∞ÏßÄÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
                                </div>
                                <button class="profile-status-add-btn" id="profile-status-add-btn" onclick="toggleStatusDropdown()">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                        <line x1="12" y1="5" x2="12" y2="19"></line>
                                        <line x1="5" y1="12" x2="19" y2="12"></line>
                                    </svg>
                                    <span class="add-btn-text">ÏÉÅÌÉú Ï∂îÍ∞Ä</span>
                                </button>
                                <div class="profile-status-dropdown" id="profile-status-dropdown" style="display:none;">
                                    <button class="status-option" data-status="breathing" onclick="addProfileStatus('breathing')">
                                        <span class="status-emoji">üí°</span>
                                        <span class="status-text">ÏòÅÍ∞ê ÏñªÎäî Ï§ë</span>
                                    </button>
                                    <button class="status-option" data-status="developing" onclick="addProfileStatus('developing')">
                                        <span class="status-emoji">üî•</span>
                                        <span class="status-text">ÏûëÌíà Í∞úÎ∞ú Ï§ë</span>
                                    </button>
                                    <div class="status-dropdown-divider"></div>
                                    <button class="status-option status-custom-option" onclick="openCustomStatusModal()">
                                        <span class="status-emoji">‚úèÔ∏è</span>
                                        <span class="status-text">ÏßÅÏ†ë ÏûÖÎ†•</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÏΩòÌÖêÏ∏† ÌÉ≠ -->
                    <div class="profile-tabs">
                        <button class="profile-tab active" data-profile-tab="posts" id="profile-posts-tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                                <rect x="3" y="3" width="7" height="7"></rect>
                                <rect x="14" y="3" width="7" height="7"></rect>
                                <rect x="14" y="14" width="7" height="7"></rect>
                                <rect x="3" y="14" width="7" height="7"></rect>
                            </svg>
                            <span id="profile-posts-tab-label">ÎÇ¥ Í≤åÏãúÎ¨º</span>
                        </button>
                        <button class="profile-tab" data-profile-tab="saved" id="profile-saved-tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <span>Ï†ÄÏû•Îêú Í≤åÏãúÎ¨º</span>
                        </button>
                        <button class="profile-tab" data-profile-tab="followers" id="profile-followers-tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                            </svg>
                            <span>ÌåîÎ°úÏõå</span>
                        </button>
                        <button class="profile-tab" data-profile-tab="following" id="profile-following-tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                <circle cx="8.5" cy="7" r="4"></circle>
                                <line x1="23" y1="11" x2="17" y2="11"></line>
                                <line x1="20" y1="8" x2="20" y2="14"></line>
                            </svg>
                            <span>ÌåîÎ°úÏûâ</span>
                        </button>
                        <button class="profile-tab logout-tab" id="profile-logout-tab" onclick="handleProfileLogout()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                            <span>Î°úÍ∑∏ÏïÑÏõÉ</span>
                        </button>
                    </div>

                    <!-- ÏΩòÌÖêÏ∏† ÏòÅÏó≠ -->
                    <div class="profile-content">
                        <!-- ÌîåÎ°úÌåÖ ÏóÖÎ°úÎìú Î≤ÑÌäº -->
                        <button class="floating-upload-btn" onclick="openUploadModal()" title="ÏûëÌíà ÏóÖÎ°úÎìú" id="floating-upload-btn" style="display:none;">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <line x1="12" y1="5" x2="12" y2="19"></line>
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                            </svg>
                        </button>
                        
                        <div id="profile-posts-content" class="profile-tab-content active">
                            <!-- Í≤åÏãúÎ¨º ÏÑúÎ∏å ÌÉ≠ -->
                            <div class="profile-sub-tabs">
                                <button class="profile-sub-tab active" data-post-filter="gallery" onclick="filterProfilePosts('gallery')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="14" width="7" height="7"></rect>
                                        <rect x="3" y="14" width="7" height="7"></rect>
                                    </svg>
                                    <span>ÏûëÌíàÍ¥Ä</span>
                                </button>
                                <button class="profile-sub-tab" data-post-filter="feed" onclick="filterProfilePosts('feed')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                    <span>ÏûêÏú†Í≤åÏãúÌåê</span>
                                </button>
                                <button class="profile-sub-tab" data-post-filter="private" onclick="filterProfilePosts('private')">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                                    </svg>
                                    <span>ÎπÑÍ≥µÍ∞ú</span>
                                </button>
                            </div>
                            
                            <!-- ÏïàÎÇ¥ Î¨∏Íµ¨ -->
                            <div class="profile-notice" id="profile-privacy-notice">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="12" y1="16" x2="12" y2="12"></line>
                                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                </svg>
                                <span>Îã§Î•∏ ÏÇ¨ÎûåÏùÄ 'ÏûëÌíàÍ¥Ä'Ïùò Í≤åÏãúÎ¨ºÎßå Î≥º Ïàò ÏûàÏäµÎãàÎã§.</span>
                            </div>
                            
                            <!-- Í≤åÏãúÎ¨º Í∑∏Î¶¨Îìú -->
                            <div id="profile-posts-grid">
                                <div class="empty-state">
                                    <div class="empty-icon">
                                        <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                            <polyline points="9 22 9 12 15 12 15 22"></polyline>
                                        </svg>
                                    </div>
                                    <h3>Î∞îÏù¥Î∏åÏΩîÎî© Í≤∞Í≥ºÎ¨º Í≥µÏú†</h3>
                                    <p>ÎãπÏã†Ïùò Ï∞ΩÏûëÎ¨ºÏùÑ ÏÑ∏ÏÉÅÍ≥º Í≥µÏú†ÌïòÏÑ∏Ïöî</p>
                                    <button class="empty-action-btn" onclick="openUploadModal()">Ï≤´ ÏûëÌíà ÏóÖÎ°úÎìúÌïòÍ∏∞</button>
                                </div>
                            </div>
                        </div>
                        <div id="profile-saved-content" class="profile-tab-content" style="display:none;">
                            <div class="empty-state">
                                <div class="empty-icon">
                                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                                        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                </div>
                                <h3>Ï†ÄÏû•Îêú Í≤åÏãúÎ¨º ÏóÜÏùå</h3>
                                <p>ÎßàÏùåÏóê ÎìúÎäî ÏûëÌíàÏùÑ Ï†ÄÏû•ÌïòÍ≥† ÎÇòÏ§ëÏóê Îã§Ïãú Í∞êÏÉÅÌïòÏÑ∏Ïöî</p>
                            </div>
                        </div>
                        <div id="profile-followers-content" class="profile-tab-content" style="display:none;">
                            <div class="follow-list-container">
                                <div id="followers-list-inline" class="follow-list">
                                    <div class="follow-empty">Î°úÎî© Ï§ë...</div>
                                </div>
                            </div>
                        </div>
                        <div id="profile-following-content" class="profile-tab-content" style="display:none;">
                            <div class="follow-list-container">
                                <div id="following-list-inline" class="follow-list">
                                    <div class="follow-empty">Î°úÎî© Ï§ë...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="user-search-tab-content" class="tab-content" style="display:none;">
                <div class="user-search-container">
                    <!-- Í≤ÄÏÉâ ÏûÖÎ†• -->
                    <div class="user-search-input-wrapper">
                        <svg class="user-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input 
                            type="text" 
                            id="user-search-input" 
                            class="user-search-input" 
                            placeholder="Í≤ÄÏÉâ"
                            oninput="handleUserSearch()"
                        >
                        <button class="user-search-clear" id="user-search-clear" onclick="clearUserSearch()" style="display:none;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="15" y1="9" x2="9" y2="15" stroke="white" stroke-width="2"></line>
                                <line x1="9" y1="9" x2="15" y2="15" stroke="white" stroke-width="2"></line>
                            </svg>
                        </button>
                    </div>

                    <!-- ÏµúÍ∑º Í≤ÄÏÉâ Ìï≠Î™© -->
                    <div class="user-search-recent-section" id="user-search-recent-section">
                        <h3 class="user-search-section-title">ÏµúÍ∑º Í≤ÄÏÉâ Ìï≠Î™©</h3>
                        <div class="user-search-recent-list" id="user-search-recent-list">
                            <div class="user-search-empty">
                                ÏµúÍ∑º Í≤ÄÏÉâ ÎÇ¥Ïó≠ ÏóÜÏùå.
                            </div>
                        </div>
                    </div>

                    <!-- Í≤ÄÏÉâ Í≤∞Í≥º -->
                    <div class="user-search-results-section" id="user-search-results-section" style="display:none;">
                        <div class="user-search-results-list" id="user-search-results-list">
                            <!-- Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                        </div>
                    </div>
                </div>
            </div>

            <div id="gallery-tab-content" class="tab-content active" style="display:block;">
                <div class="gallery-container">
                    <!-- Í≤ÄÏÉâ Î∞î -->
                    <div class="feed-search-bar">
                        <div class="feed-search-input-wrapper">
                            <svg class="feed-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input 
                                type="text" 
                                id="gallery-search-input" 
                                class="feed-search-input" 
                                placeholder="Ï†úÎ™© ÎòêÎäî ÎÇ¥Ïö© Í≤ÄÏÉâ..."
                                onkeypress="if(event.key==='Enter') performGallerySearch()"
                            >
                            <button class="feed-search-btn" onclick="performGallerySearch()">
                                Í≤ÄÏÉâ
                            </button>
                            <button class="feed-search-clear" id="gallery-search-clear" onclick="clearGallerySearch()" style="display:none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- ÌïÑÌÑ∞ Î≤ÑÌäº -->
                    <div class="feed-filter-buttons">
                        <button class="feed-filter-toggle-btn" id="gallery-sort-filter-btn" onclick="toggleGallerySortFilter()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="6" x2="16" y2="6"></line>
                                <line x1="8" y1="12" x2="20" y2="12"></line>
                                <line x1="4" y1="18" x2="12" y2="18"></line>
                            </svg>
                            Ï†ïÎ†¨
                        </button>
                        <button class="feed-filter-toggle-btn" id="gallery-tag-filter-btn" onclick="toggleGalleryTagFilterDropdown()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                <line x1="7" y1="7" x2="7.01" y2="7"></line>
                            </svg>
                            ÌÉúÍ∑∏
                        </button>
                    </div>

                    <!-- Ï†ïÎ†¨ ÌïÑÌÑ∞ (Ïà®ÍπÄ) -->
                    <div class="feed-sort-dropdown" id="gallery-sort-dropdown" style="display:none;">
                        <button class="feed-sort-option active" data-sort="latest" onclick="changeGallerySortMode('latest')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                            ÏµúÏã†Ïàú
                        </button>
                        <button class="feed-sort-option" data-sort="popular" onclick="changeGallerySortMode('popular')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                            Ïù∏Í∏∞Ïàú
                        </button>
                        <button class="feed-sort-option" data-sort="trending" onclick="changeGallerySortMode('trending')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                                <polyline points="17 6 23 6 23 12"></polyline>
                            </svg>
                            Îñ†Ïò§Î•¥ÎäîÏàú
                        </button>
                    </div>

                    <!-- ÌÉúÍ∑∏ ÌïÑÌÑ∞ (Ïà®ÍπÄ) -->
                    <div class="feed-tag-dropdown" id="gallery-tag-dropdown" style="display:none;">
                        <div class="feed-tag-input-wrapper">
                            <svg class="feed-tag-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                <line x1="7" y1="7" x2="7.01" y2="7"></line>
                            </svg>
                            <input 
                                type="text" 
                                id="gallery-tag-input" 
                                class="feed-tag-input" 
                                placeholder="ÌÉúÍ∑∏ Í≤ÄÏÉâ..."
                                oninput="searchGalleryTagSuggestions()"
                                onkeypress="if(event.key==='Enter') addGalleryTagFilter()"
                                onfocus="searchGalleryTagSuggestions()"
                            >
                            <button class="feed-tag-add-btn" onclick="addGalleryTagFilter()">
                                Ï∂îÍ∞Ä
                            </button>
                        </div>
                        <!-- ÌÉúÍ∑∏ ÏûêÎèôÏôÑÏÑ± -->
                        <div class="feed-tag-suggestions" id="gallery-tag-suggestions" style="display:none;"></div>
                    </div>

                    <!-- ÏÑ†ÌÉùÎêú ÌÉúÍ∑∏ -->
                    <div class="feed-selected-tags" id="gallery-selected-tags" style="display:none;"></div>
                    
                    <!-- ÏûëÌíàÍ¥Ä Î¶¨Ïä§Ìä∏ -->
                    <div class="gallery-list" id="gallery-list">
                        <div class="feed-loading">
                            <div class="feed-loading-spinner"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="feed-tab-content" class="tab-content" style="display:none;">
                <div class="feed-container">
                    <!-- Í≤ÄÏÉâ Î∞î -->
                    <div class="feed-search-bar">
                        <div class="feed-search-input-wrapper">
                            <svg class="feed-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            <input 
                                type="text" 
                                id="feed-search-input" 
                                class="feed-search-input" 
                                placeholder="Ï†úÎ™© ÎòêÎäî ÎÇ¥Ïö© Í≤ÄÏÉâ..."
                                onkeypress="if(event.key==='Enter') performSearch()"
                            >
                            <button class="feed-search-btn" onclick="performSearch()">
                                Í≤ÄÏÉâ
                            </button>
                            <button class="feed-search-clear" id="feed-search-clear" onclick="clearSearch()" style="display:none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- ÌïÑÌÑ∞ Î≤ÑÌäº -->
                    <div class="feed-filter-buttons">
                        <button class="feed-filter-toggle-btn" id="sort-filter-btn" onclick="toggleSortFilter()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="4" y1="6" x2="16" y2="6"></line>
                                <line x1="8" y1="12" x2="20" y2="12"></line>
                                <line x1="4" y1="18" x2="12" y2="18"></line>
                            </svg>
                            Ï†ïÎ†¨
                        </button>
                        <button class="feed-filter-toggle-btn" id="tag-filter-btn" onclick="toggleTagFilterDropdown()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                <line x1="7" y1="7" x2="7.01" y2="7"></line>
                            </svg>
                            ÌÉúÍ∑∏
                        </button>
                    </div>

                    <!-- Ï†ïÎ†¨ ÌïÑÌÑ∞ (Ïà®ÍπÄ) -->
                    <div class="feed-sort-dropdown" id="feed-sort-dropdown" style="display:none;">
                        <button class="feed-sort-option active" data-sort="latest" onclick="changeSortMode('latest')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 4 23 10 17 10"></polyline>
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                            </svg>
                            ÏµúÏã†Ïàú
                        </button>
                        <button class="feed-sort-option" data-sort="popular" onclick="changeSortMode('popular')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                            </svg>
                            Ïù∏Í∏∞Ïàú
                        </button>
                        <button class="feed-sort-option" data-sort="trending" onclick="changeSortMode('trending')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                                <polyline points="17 6 23 6 23 12"></polyline>
                            </svg>
                            Îñ†Ïò§Î•¥ÎäîÏàú
                        </button>
                    </div>

                    <!-- ÌÉúÍ∑∏ ÌïÑÌÑ∞ (Ïà®ÍπÄ) -->
                    <div class="feed-tag-dropdown" id="feed-tag-dropdown" style="display:none;">
                        <div class="feed-tag-input-wrapper">
                            <svg class="feed-tag-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
                                <line x1="7" y1="7" x2="7.01" y2="7"></line>
                            </svg>
                            <input 
                                type="text" 
                                id="feed-tag-input" 
                                class="feed-tag-input" 
                                placeholder="ÌÉúÍ∑∏ Í≤ÄÏÉâ..."
                                oninput="searchTagSuggestions()"
                                onkeypress="if(event.key==='Enter') addTagFilter()"
                                onfocus="searchTagSuggestions()"
                            >
                            <button class="feed-tag-add-btn" onclick="addTagFilter()">
                                Ï∂îÍ∞Ä
                            </button>
                        </div>
                        <!-- ÌÉúÍ∑∏ ÏûêÎèôÏôÑÏÑ± -->
                        <div class="feed-tag-suggestions" id="feed-tag-suggestions" style="display:none;"></div>
                    </div>

                    <!-- ÏÑ†ÌÉùÎêú ÌÉúÍ∑∏ -->
                    <div class="feed-selected-tags" id="feed-selected-tags" style="display:none;"></div>
                    
                    <!-- ÌîºÎìú Î¶¨Ïä§Ìä∏ -->
                    <div class="feed-list" id="feed-list">
                        <div class="feed-loading">
                            <div class="feed-loading-spinner"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="messages-tab-content" class="tab-content" style="display:none;">
                <div class="messages-container">
                    <!-- Ï¢åÏ∏°: ÎåÄÌôî ÏÉÅÎåÄ Î™©Î°ù -->
                    <div class="messages-sidebar">
                        <div class="messages-sidebar-header">
                            <h2>ÎåÄÌôî ÏÉÅÎåÄ</h2>
                        </div>
                        <div class="messages-conversations-list" id="messages-conversations-list">
                            <div class="messages-loading">
                                <div class="messages-loading-spinner"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Ïö∞Ï∏°: ÎåÄÌôî ÎÇ¥Ïö© -->
                    <div class="messages-chat-area">
                        <div class="messages-chat-empty" id="messages-chat-empty">
                            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                            </svg>
                            <p>ÎåÄÌôîÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</p>
                        </div>

                        <div class="messages-chat-content" id="messages-chat-content" style="display:none;">
                            <!-- ÎåÄÌôî ÏÉÅÎåÄ Ìó§Îçî -->
                            <div class="messages-chat-header">
                                <div class="messages-chat-user-info">
                                    <div class="messages-chat-avatar" id="messages-chat-avatar">
                                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                    </div>
                                    <span class="messages-chat-username" id="messages-chat-username">ÏÇ¨Ïö©Ïûê</span>
                                </div>
                            </div>

                            <!-- ÎåÄÌôî Î©îÏãúÏßÄ Î™©Î°ù -->
                            <div class="messages-chat-messages" id="messages-chat-messages">
                                <div class="messages-loading">
                                    <div class="messages-loading-spinner"></div>
                                </div>
                            </div>

                            <!-- Î©îÏãúÏßÄ ÏûÖÎ†• -->
                            <div class="messages-chat-input-area">
                                <textarea 
                                    id="messages-chat-input" 
                                    class="messages-chat-input" 
                                    placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏµúÎåÄ 500Ïûê)"
                                    maxlength="500"
                                    rows="1"
                                ></textarea>
                                <button class="messages-chat-send-btn" onclick="sendMessageFromChat()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="22" y1="2" x2="11" y2="13"></line>
                                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Î™®Îã¨Îì§ÏùÄ ÌÖúÌîåÎ¶ø ÏãúÏä§ÌÖúÏóê ÏùòÌï¥ ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ (js/templates/modals/*.js) -->
    <!-- Î™®Îì† Î™®Îã¨ÏùÄ js/main.jsÏùò ÌÖúÌîåÎ¶ø Î°úÎçîÏóê ÏùòÌï¥ ÏûêÎèôÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
    
    <!-- Î∞∞Í≤ΩÏùåÏïÖ Ïò§ÎîîÏò§ ÏöîÏÜå -->
    <audio id="background-music" loop preload="auto">
        <source src="Î∞∞Í≤ΩÏùå.mp3" type="audio/mpeg">
    </audio>
    
    <script src="supabase-config.js"></script>

    <!-- JavaScript Î™®Îìà (ES6 Modules) -->
    <script type="module" src="js/main.js"></script>
    
    <!-- Î∞∞Í≤ΩÏùåÏïÖ Ïä§ÌÅ¨Î¶ΩÌä∏ (ÎèÖÎ¶Ω Ïã§Ìñâ) -->
    <script src="js/backgroundMusic.js"></script>
    
    <!-- Í∏∞Ï°¥ ÌÜµÌï© JavaScript (Î∞±ÏóÖÏö© - ÎÇòÏ§ëÏóê ÏÇ≠Ï†ú Í∞ÄÎä•) -->
    <!-- <script src="script.js"></script> -->
</body>
</html>